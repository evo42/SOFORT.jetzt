let payment_request_event=undefined;let payment_request_resolver=undefined;self.addEventListener('canmakepayment',function(e){e.respondWith(true)});self.addEventListener('paymentrequest',function(e){var url="https://sepa.digital/pay";payment_request_event=e;payment_request_resolver=new PromiseResolver();e.respondWith(payment_request_resolver.promise);e.openWindow(url).then(window_client=>{if(window_client==null){payment_request_resolver.reject('Failed to open window')}}).catch(function(err){payment_request_resolver.reject(err)})});self.addEventListener('message',listener=function(e){if(e.data=="payment_app_window_ready"){sendPaymentRequest();return}if(e.data.methodName){payment_request_resolver.resolve(e.data)}else{payment_request_resolver.reject(e.data)}});function sendPaymentRequest(){let options={includeUncontrolled:false,type:'window'};clients.matchAll(options).then(function(clientList){for(var i=0;i<clientList.length;i+=1){if(!payment_request_event){continue}clientList[i].postMessage({total:payment_request_event.total,methodData:payment_request_event.methodData})}})}function PromiseResolver(){this.resolve_;this.reject_;this.promise_=new Promise(function(resolve,reject){this.resolve_=resolve;this.reject_=reject}.bind(this))}PromiseResolver.prototype={get promise(){return this.promise_},get resolve(){return this.resolve_},get reject(){return this.reject_}};